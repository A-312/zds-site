{% load date %}
{% load captureas %}
{% load thumbnail %}

<article itemprop="itemListElement">
    {% if not link %}
        {# Public link by default #}
        {% captureas link %}
            {{ article.get_absolute_url_online }}
        {% endcaptureas %}
    {% endif %}

    <a href="{{ link }}">
        {% if article.image %}
            <img src="{{ article.image.article_illu.url }}" alt="" class="tutorial-img avatar">
        {% endif %}

        <div class="tutorial-infos {% if not article.image %}no-illu{% endif %}">
            <h3>{{ article.title }}</h3>
            <p class="article-metadata">
                {{ article.pubdate|format_date|capfirst }} -
                <a href="
                    {% if article.get_reaction_count == 0 %}
                        {{ link }}#reactions
                    {% else %}
                        {{ article.get_last_reaction.get_absolute_url }}
                    {% endif %}
                    ">
                    {% if article.get_reaction_count == 0 %}
                        Aucune réaction
                    {% elif article.get_reaction_count == 1 %}
                        1 réaction
                    {% else %}
                        {{ article.get_reaction_count }} réactions
                    {% endif %}
                </a>
            </p>
        </div>
    </a>
</article>