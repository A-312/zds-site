{% extends "base.html" %}

{% load staticfiles %}
{% load emarkdown %}
{% load date %}
{% load interventions %}
{% load topbar %}
{% load thumbnail %}
{% load i18n %}



{% block body_class %}home{% endblock %}



{% block content_out %}
    {% url 'zds.tutorial.views.index' as url_tutorials %}
    {% url 'zds.article.views.index' as url_articles %}
    {% url 'zds.forum.views.index' as url_forums %}
    {% url 'zds.pages.views.association' as url_association %}

    <div class="home-banner">
        <div class="home-larger">
            {% if user.is_authenticated %}
                <section class="home-description connected">
                    <blockquote>
                        «&nbsp;{{ quote }}&nbsp;»
                    </blockquote>
                    <p>
                        <span class="important">{% trans "Nouveau !" %}</span>

                        {% trans "Vous pouvez maintenant aider les auteurs dans la rédaction de leurs tutoriels !" %}

                        <a class="home-description-button" href="/">
                            {% trans "En savoir plus" %}
                        </a>
                    </p>
                </section>
            {% else %}
                <section class="home-description">
                    <div class="column">
                        <h2>
                            {% trans "La connaissance pour tous" %}
                        </h2>
                        <p>
                            {% trans "Zeste de Savoir est un site de partage de connaissances sur lequel vous trouverez des tutoriels de tous niveaux, des articles et des forums d'entraide annimés par et pour les communautés." %}
                        </p>
                    </div>
                    <div class="column">
                        <h2>
                            {% trans "Partagez vos connaissances" %}
                        </h2>
                        <p>
                            {% trans "Tout les membres peuvent écrire et publier des tutoriels et des articles sur le site. Pour assurer la qualité et la pédagogie du contenu, l'équipe du site valide chaque cours avant publication." %}
                        </p>
                    </div>
                    <div class="column">
                        <h2>
                            {% trans "Gratuit et sans publicité" %}
                        </h2>
                        <p>
                            {% trans "Tout cela est entièrement gratuit et garanti sans publicité, le site est géré et financé par une association à but non lucratif." %}
                        </p>
                        <p><a class="home-description-button" href="#link-to-the-release-article">
                            {% trans "Aider à développer la plateforme" %}
                        </a></p>
                    </div>
                </section>
            {% endif %}

            <section class="home-search-box">
                <form action='{% url "haystack_search" %}'>
                    <label for="search-box-field">
                        {% trans "Recherche" %}
                    </label>
                    <input type="text" name="q" id="search-box-field" placeholder='{% trans "Mathématiques, UDK, HTML, Java, PHP, ..." %}' >
                    <button type="submit" class="ico-after ico-search" title='{% trans "Lancer la recherche" %}'></button>
                </form>
            </section>
        </div>
    </div>

    <div class="home-larger">
        <section class="home-pinned-content">
            <h2 class="ico-after ico-tutorials" itemprop="name">
                {% trans "A la une" %}
            </h2>

            <ul class="pinned-block">
                <li>
                    test
                </li>
                <li>
                    test
                </li>
                <li>
                    test
                </li>
                <li>
                    test
                </li>
                <li>
                    test
                </li>
            </ul>
        </section>

        <section class="" itemscope itemtype="http://schema.org/ItemList">
            <h2 class="ico-after ico-articles" itemprop="name">
                {% trans "Derniers articles" %}
            </h2>

            <meta itemprop="itemListOrder" content="Descending">

            {% for article in last_articles %}
                <article>
                    {% if article.image %}
                        <a href="{{ article.get_absolute_url_online }}" tabindex="-1">
                            <img src="{{ article.image.article_illu.url }}" alt="" class="tutorial-img avatar">
                        </a>
                    {% endif %}
                    <div class="tutorial-infos {% if not article.image %}no-illu{% endif %}">
                        <h3>
                            <a href="{{ article.get_absolute_url_online }}" title="{{ article.title }}" itemprop="itemListElement">
                                {{ article.title }}
                            </a>
                        </h3>

                        <span class="article-metadata">
                            {{ article.pubdate|format_date|capfirst }} -
                            <a href="
                                {% if article.last_read_reaction %}
                                    {{ article.last_read_reaction.get_absolute_url }}
                                {% else %}
                                    {{ article.get_absolute_url_online }}#reactions
                                {% endif %}
                            ">
                                {% if article.get_reaction_count == 0 %}
                                    {% trans "Aucune réaction" %}
                                {% else %}
                                    {{ article.get_reaction_count }} {% trans "réaction" %}{{ article.get_reaction_count|pluralize }}
                                {% endif %}
                            </a>
                        </span>
                    </div>

                    <p class="resume">
                        {{ article.description }}
                    </p>
                </article>
            {% empty %}
                <p>{% trans "Aucun article disponible." %}</p>
            {% endfor %}
        </section>

        <section itemscope itemtype="http://schema.org/ItemList">
            <h2 class="ico-after ico-tutorials" itemprop="name">
                {% trans "Derniers tutoriels" %}
            </h2>

            <meta itemprop="itemListOrder" content="Descending">

            {% for tutorial in last_tutorials %}
                {% include 'tutorial/includes/tutorial_item.part.html' %}
            {% empty %}
                <p>{% trans "Aucun tutoriel disponible." %}</p>
            {% endfor %}
        </section>
    </div>
{% endblock %}