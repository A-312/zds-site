{% extends "base.html" %}

{% load staticfiles %}
{% load emarkdown %}
{% load date %}
{% load interventions %}
{% load topbar %}
{% load thumbnail %}
{% load i18n %}
{% load captureas %}



{% block body_class %}home{% endblock %}



{% block content_out %}
    {% url 'zds.tutorial.views.index' as url_tutorials %}
    {% url 'zds.article.views.index' as url_articles %}
    {% url 'zds.forum.views.index' as url_forums %}

    <section class="home-header">
        <div class="home-wrapper">
        {% if user.is_authenticated %}
            <section class="home-description connected">
                <blockquote>{{ quote }}</blockquote>
                <p class="new-feature">
                    <span class="important">{% trans "Nouveau !" %}</span>

                    {% trans "Vous pouvez maintenant aider les auteurs dans la rédaction de leurs tutoriels !" %}

                    <a class="home-description-button" href="#link-to-the-release-article">
                        {% trans "En savoir plus" %}
                    </a>
                </p>
            </section>
        {% else %}
            <section class="home-description">
                <div class="column">
                    <h2>
                        {% trans "La connaissance pour tous" %}
                    </h2>
                    <p>
                        {% trans "Zeste de Savoir est un site de partage de connaissances sur lequel vous trouverez des tutoriels de tous niveaux, des articles et des forums d'entraide annimés par et pour les communautés." %}
                    </p>
                </div>
                <div class="column">
                    <h2>
                        {% trans "Partagez vos connaissances" %}
                    </h2>
                    <p>
                        {% trans "Tout les membres peuvent écrire et publier des tutoriels et des articles sur le site. Pour assurer la qualité et la pédagogie du contenu, l'équipe du site valide chaque cours avant publication." %}
                    </p>
                </div>
                <div class="column">
                    <h2>
                        {% trans "Gratuit et sans publicité" %}
                    </h2>
                    <p>
                        {% trans "Tout cela est entièrement gratuit et garanti sans publicité, le site est géré et financé par une association à but non lucratif." %}
                    </p>
                    <p><a class="home-description-button" href="#link-to-the-development-plateform">
                        {% trans "Aider à développer la plateforme" %}
                    </a></p>
                </div>
            </section>
            <section class="home-description short">
                <blockquote>
                    <span>{% trans "Zeste de Savoir, le site de partage" %}</span>
                    <span>{% trans "de connaissances, sans pépins !" %}</span>
                </blockquote>
                <a class="home-description-button" href="...">
                    {% trans "En savoir plus" %}
                </a>
            </section>
        {% endif %}

             <section class="home-search-box">
                <form action='{% url "haystack_search" %}'>
                    <label for="search-box-field">
                        {% trans "Recherche" %}
                    </label>
                    <input type="text" name="q" id="search-box-field" placeholder='{% trans "Mathématiques, UDK, HTML, Java, PHP, ..." %}' >
                    <button type="submit" class="ico-after ico-search" title='{% trans "Lancer la recherche" %}'></button>
                </form>
            </section>
        </div>
    </section>

    <div class="home-wrapper">
        <section class="home-pinned-content">
            <h2 class="home-heading heading-white" itemprop="name">
                {% trans "A la une" %}

                {% if perms.news.change_news %}
                    <a href="{% url "news-list" %}" class="btn btn-grey">{% trans "Toutes les unes" %}</a>
                {% endif %}
            </h2>

            <div class="featured-row">
                {% for news in last_news %}
                <article class="featured-item">
                    <a href="{{ news.url }}">
                        <img src="{{ news.image_url }}" alt="" class="content-illu">
                        <div class="featured-meta">
                            <h3>{{ news.title }}</h3>
                            <p class="featured-description">Un {{ news.type }} par <i>{% for member in news.authors.all %}{{ member }}, {% endfor %}</i></p>
                        </div>
                        <div class="overlay"></div>
                    </a>
                </article>
                {% endfor %}
            </div>
        </section>
        <div class="home-row">
           <section itemscope itemtype="http://schema.org/ItemList">
                <h2 class="ico-after ico-tutorials home-heading" itemprop="name">
                    {% trans "Derniers tutoriels" %}
                    <a href="{% url "zds.tutorial.views.index" %}" class="btn btn-grey">{% trans "Tous les tutoriels" %}</a>
                </h2>

                <meta itemprop="itemListOrder" content="Descending">

                <div class="content-item-list">
                    {% for tutorial in last_tutorials %}
                        {% include 'tutorial/includes/tutorial_item.part.html' with show_description=True item_class=forloop.first|yesno:", mini" %}
                    {% empty %}
                        <p>{% trans "Aucun tutoriel disponible." %}</p>
                    {% endfor %}
                    <div class="content-item write-tutorial">
                        <div class="write-tutorial-text">
                            <p>{% trans "Il y a 452 tutoriels sur Zeste de Savoir." %}</p>
                            <p class="lead">{% trans "Pourquoi pas le votre ?" %}</p>
                        </div>
                        <a href="#" class="btn btn-write-tutorial">{% trans "Rédiger un tutoriel" %}</a>
                    </div>
                </div>
            </section>

            <section itemscope itemtype="http://schema.org/ItemList">
                <h2 class="ico-after ico-articles home-heading" itemprop="name">
                    {% trans "Derniers articles" %}
                    <a href="{% url "zds.article.views.index" %}" class="btn btn-grey">{% trans "Tous les articles" %}</a>
                </h2>

                <meta itemprop="itemListOrder" content="Descending">

                {% for article in last_articles %}
                    {% include 'article/includes/article_item.part.html' with show_description=True %}
                {% empty %}
                    <p>{% trans "Aucun article disponible." %}</p>
                {% endfor %}
            </section>
        </div>

        <section itemscope itemtype="http://schema.org/ItemList">
            <h2 class="home-heading" itemprop="name">
                {% trans "Derniers sujets" %}
                <a href="{% url "zds.forum.views.index" %}" class="btn btn-grey">{% trans "Tous les sujets" %}</a>
            </h2>

            <meta itemprop="itemListOrder" content="Descending">

            <div class="content-item-list">
              {% for topic in last_topics %}
                  {% include 'forum/includes/topic_item.part.html' %}
              {% empty %}
                  <p>{% trans "Aucun sujet disponible." %}</p>
              {% endfor %}
            </div>
        </section>
    </div>
{% endblock %}
